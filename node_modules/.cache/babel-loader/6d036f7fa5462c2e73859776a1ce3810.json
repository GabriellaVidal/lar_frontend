{"ast":null,"code":"var _jsxFileName = \"/home/gabriella/Documentos/lar-ureto-front-end/src/pages/User.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport SimpleDevice from '../components/SimpleDevice';\nimport Footer from '../components/Footer';\nimport { isAuthenticated } from '../services/auth';\nimport './User.css';\nimport api from \"../services/api\";\n\nclass User extends Component {\n  constructor() {\n    super();\n\n    this.populateAuthorizations = async () => {\n      const request = await api.get('/authorization/devices');\n\n      if (request !== undefined) {\n        const data = request.data.authorizations;\n        let auths = [];\n\n        for (let i = 0; i < data.length; i++) {\n          auths[i] = {\n            name: data[i].name,\n            device_id: data[i].device_id,\n            status: \"Desconectado.\"\n          };\n        }\n\n        this.setState({\n          authorizations: auths\n        });\n      }\n    };\n\n    this.state = {\n      authorizations: []\n    };\n  }\n\n  async componentDidMount() {\n    if (isAuthenticated()) {\n      document.title = \"Devices\";\n      await this.populateAuthorizations();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      id: \"device-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }\n    }, !isAuthenticated() ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 43\n      }\n    }) : this.state.authorizations.map((device, index) => /*#__PURE__*/React.createElement(SimpleDevice, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }\n    }, device))), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n\nexport default User;","map":{"version":3,"sources":["/home/gabriella/Documentos/lar-ureto-front-end/src/pages/User.js"],"names":["React","Component","Redirect","SimpleDevice","Footer","isAuthenticated","api","User","constructor","populateAuthorizations","request","get","undefined","data","authorizations","auths","i","length","name","device_id","status","setState","state","componentDidMount","document","title","render","map","device","index"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,eAAT,QAAgC,kBAAhC;AAEA,OAAO,YAAP;AACA,OAAOC,GAAP,MAAgB,iBAAhB;;AAGA,MAAMC,IAAN,SAAmBN,SAAnB,CAA6B;AACzBO,EAAAA,WAAW,GAAG;AACV;;AADU,SAYdC,sBAZc,GAYW,YAAY;AACjC,YAAMC,OAAO,GAAG,MAAMJ,GAAG,CAACK,GAAJ,CAAQ,wBAAR,CAAtB;;AACA,UAAGD,OAAO,KAAKE,SAAf,EAAyB;AACrB,cAAMC,IAAI,GAAGH,OAAO,CAACG,IAAR,CAAaC,cAA1B;AACA,YAAIC,KAAK,GAAG,EAAZ;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,MAAzB,EAAiCD,CAAC,EAAlC,EAAqC;AACjCD,UAAAA,KAAK,CAACC,CAAD,CAAL,GAAW;AACPE,YAAAA,IAAI,EAAEL,IAAI,CAACG,CAAD,CAAJ,CAAQE,IADP;AAEPC,YAAAA,SAAS,EAAEN,IAAI,CAACG,CAAD,CAAJ,CAAQG,SAFZ;AAGPC,YAAAA,MAAM,EAAE;AAHD,WAAX;AAKH;;AACD,aAAKC,QAAL,CAAc;AAACP,UAAAA,cAAc,EAAEC;AAAjB,SAAd;AACH;AAEJ,KA3Ba;;AAGV,SAAKO,KAAL,GAAa;AACTR,MAAAA,cAAc,EAAE;AADP,KAAb;AAMH;;AAoBD,QAAMS,iBAAN,GAA0B;AAEtB,QAAIlB,eAAe,EAAnB,EAAuB;AACnBmB,MAAAA,QAAQ,CAACC,KAAT,GAAiB,SAAjB;AACA,YAAM,KAAKhB,sBAAL,EAAN;AACH;AACJ;;AAIDiB,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAS,MAAA,EAAE,EAAC,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACO,CAACrB,eAAe,EAAjB,gBAAwB,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAxB,GACA,KAAKiB,KAAL,CAAWR,cAAX,CAA0Ba,GAA1B,CAA8B,CAACC,MAAD,EAASC,KAAT,kBAC5B,oBAAC,YAAD;AAAc,MAAA,GAAG,EAAEA,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKD,MADL,CADF,CAFN,CADA,eASA,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATA,CADJ;AAeH;;AAxDwB;;AA2D7B,eAAerB,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router'\nimport SimpleDevice from '../components/SimpleDevice';\nimport Footer from '../components/Footer'; \nimport { isAuthenticated } from '../services/auth'; \n \nimport './User.css';\nimport api from \"../services/api\";\n\n\nclass User extends Component {\n    constructor() {\n        super();\n         \n        this.state = {\n            authorizations: [\n                \n            ]\n        };\n\n    }\n\n\n    populateAuthorizations = async () => {\n        const request = await api.get('/authorization/devices');\n        if(request !== undefined){\n            const data = request.data.authorizations;\n            let auths = []; \n            for (let i = 0; i < data.length; i++){\n                auths[i] = { \n                    name: data[i].name,\n                    device_id: data[i].device_id,\n                    status: \"Desconectado.\"\n                }; \n            }\n            this.setState({authorizations: auths}); \n        }\n\n    }\n\n    async componentDidMount() {\n\n        if (isAuthenticated()) {\n            document.title = \"Devices\";\n            await this.populateAuthorizations();\n        }\n    }\n\n    \n\n    render() {\n        return (\n            <div>\n            <section id=\"device-list\">\n                { (!isAuthenticated() ) ? <Redirect to=\"/login\"/> :\n                  this.state.authorizations.map((device, index) => (\n                    <SimpleDevice key={index} >\n                        {device}\n                    </SimpleDevice>\n                ))}\n            </section>\n            <Footer>\n\n            </Footer>\n            </div> \n        );\n    }\n}\n\nexport default User; "]},"metadata":{},"sourceType":"module"}